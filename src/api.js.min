var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};window.nettools=window.nettools||{};nettools.awsSesGuiNotifications=function(a,b,c){this.nodeId=a;this.type=b;this.tableClassList=c;this.data={ts:null,lst:[],count:0};this.initialize()};nettools.awsSesGuiNotifications.prototype.i18n={timestamp:"Time",recipient:"Recipient",subject:"Subject"};
nettools.awsSesGuiNotifications.prototype.i18n.delivery={smtpResponse:"Response of SMTP"};nettools.awsSesGuiNotifications.prototype.i18n.bounce={action:"R(action)",reason:"R(reason)",diagnosticCode:"R(diag. code)",status:"R(status)"};nettools.awsSesGuiNotifications.prototype.initialize=function(){this.data.ts=(new Date).valueOf();this.data.lst=[];this.count=0};nettools.awsSesGuiNotifications.prototype.getColumns=function(a){return[a.timestamp,a.to,a.subject].concat(this.getColumnsForType(a))};
nettools.awsSesGuiNotifications.prototype.getColumnsForType=function(a){return"Delivery"==this.type?[a.smtpResponse]:"Bounce"==this.type?[a.action,a.reason,a.status,a.diagnosticCode]:[]};nettools.awsSesGuiNotifications.prototype.getHeaders=function(){return[this.i18n.timestamp,this.i18n.recipient,this.i18n.subject].concat(this.getHeadersForType())};
nettools.awsSesGuiNotifications.prototype.getHeadersForType=function(){switch(this.type){case "Delivery":return[this.i18n.delivery.smtpResponse];case "Bounce":return[this.i18n.bounce.action,this.i18n.bounce.reason,this.i18n.bounce.status,this.i18n.bounce.diagnosticCode];default:return[]}};
nettools.awsSesGuiNotifications.prototype.createCSSContent=function(){return"\n#"+this.nodeId+"{\n    margin-top: 1em;\n    margin-bottom: 1em;\n}\n\n#"+this.nodeId+" span{\n    background-color: ghostwhite;display: inline-block;\n}\n\n#"+this.nodeId+" table{\n    color:black;\n}\n\n#"+this.nodeId+" table tr:nth-child(2n){\n    background-color: whitesmoke;\n    color: black;\n}\n    "+this.createCSSContentForType()};
nettools.awsSesGuiNotifications.prototype.createCSSContentForType=function(){switch(this.type){case "Delivery":return"\n#"+this.nodeId+" table th{\n\tbackground-color: darkgreen;\n\tcolor:white;\n}\n\n#"+this.nodeId+" table{\n\tborder:2px solid darkgreen;\n    background-color: #00640055;\n}\n                ";case "Bounce":return"\n#"+this.nodeId+" table th{\n\tbackground-color: firebrick;\n\tcolor:white;\n}\n\n#"+this.nodeId+" table{\n\tborder:2px solid firebrick;\n    background-color: #b2222255;\n}\n                ";
default:return""}};
nettools.awsSesGuiNotifications.prototype.updateGUI=function(){function a(g,e){e=void 0===e?"td":e;for(var l=document.createElement("tr"),k=0;k<g.length;k++){var m=document.createElement(e);m.innerHTML=g[k].replace(/\n/g,"<br>");l.appendChild(m)}return l}var b=document.getElementById(this.nodeId);if(b){b.innerHTML="<style>"+this.createCSSContent()+"<style>";var c=document.createElement("span"),d=document.createElement("table");d.className=this.tableClassList;d.appendChild(a(this.getHeaders(),"th"));
var h=[],f;for(f in this.data.lst)h.push(this.data.lst[f]);h.sort(function(g,e){return g.timestamp>e.timestamp?-1:g.timestamp<e.timestamp?1:0});for(f=0;f<h.length;f++)d.appendChild(a(this.getColumns(h[f])));c.appendChild(d);b.appendChild(c)}};nettools.awsSesGuiNotifications.prototype.execute=function(a){var b=this;return a.then(function(c){for(var d=0;d<c.messages.length;d++)null==b.data.lst[c.messages[d].MessageId]&&(b.data.lst[c.messages[d].MessageId]=c.messages[d].Body);b.updateGUI()})};
nettools.awsSesGuiNotifications.prototype.update=function(a,b){b=void 0===b?5:b;var c=this,d=function(){c.execute(a()).then(function(){c.data.count<b-1&&(c.data.count++,window.setTimeout(d,1E3))})["catch"](nettools.jscore.RequestHelper.promiseErrorHandler)};this.initialize();d()};