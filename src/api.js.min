var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};window.nettools=window.nettools||{};nettools.awsSesGuiNotifications=function(a,b,c){this.nodeId=a;this.type=b;this.tableClassList=c;this.data={ts:null,lst:[],count:0};this.initialize()};nettools.awsSesGuiNotifications.prototype.initialize=function(){this.data.ts=(new Date).valueOf();this.data.lst=[];this.count=0};
nettools.awsSesGuiNotifications.prototype.getColumns=function(a){return[a.timestamp,a.to,a.subject].concat(this.getColumnsForType(a))};nettools.awsSesGuiNotifications.prototype.getColumnsForType=function(a){return"Delivery"==this.type?[a.smtpResponse]:"Bounce"==this.type?[a.action,a.reason,a.status,a.diagnosticCode]:[]};nettools.awsSesGuiNotifications.prototype.getHeaders=function(){return[this.i18n.timestamp,this.i18n.recipient,this.i18n.subject].concat(this.getHeadersForType())};
nettools.awsSesGuiNotifications.prototype.getHeadersForType=function(){switch(this.type){case "Delivery":return[this.i18n.delivery.smtpResponse];case "Bounce":return[this.i18n.bounce.action,this.i18n.bounce.reason,this.i18n.bounce.status,this.i18n.bounce.diagnosticCode];default:return[]}};
nettools.awsSesGuiNotifications.prototype.createCSSContent=function(){return"\n\t#"+this.nodeId+"{\n\t\tmargin-top: 1.5em;\n\t\tmargin-bottom: 1.5em;\n\t}\n\n\t#"+this.nodeId+" span{\n\t\tbackground-color: white;\n\t\tdisplay: inline-block;\n\t}\n\n\t#"+this.nodeId+" table{\n\t\tcolor:black;\n\t\tborder-collapse: collapse;\n\t}\n\n\t#"+this.nodeId+" table td,\n\t#"+this.nodeId+" table th{\n\t\tborder-right: 1px solid lightgray;\n\t}\n\n\t#"+this.nodeId+" table tr:nth-child(2n){\n\t\tbackground-color: whitesmoke;\n\t\tcolor: black;\n\t}\n\t\t"+
this.createCSSContentForType()};
nettools.awsSesGuiNotifications.prototype.createCSSContentForType=function(){switch(this.type){case "Delivery":return"\n\t#"+this.nodeId+" table th{\n\t\tbackground-color: darkgreen;\n\t\tcolor:white;\n\t}\n\n\t#"+this.nodeId+" table{\n\t\tborder:2px solid darkgreen;\n\t\tbackground-color: #00640055;\n\t}\n\t";case "Bounce":return"\n\t#"+this.nodeId+" table th{\n\t\tbackground-color: firebrick;\n\t\tcolor:white;\n\t}\n\n\t#"+this.nodeId+" table{\n\t\tborder:2px solid firebrick;\n\t\tbackground-color: #b2222255;\n\t}\n\t";default:return""}};
nettools.awsSesGuiNotifications.prototype.updateGUI=function(){function a(f,e){e=void 0===e?"td":e;for(var l=document.createElement("tr"),h=0;h<f.length;h++){var m=document.createElement(e);m.innerHTML=f[h].replace(/\n/g,"<br>");l.appendChild(m)}return l}var b=document.getElementById(this.nodeId);if(b){b.innerHTML="<style>"+this.createCSSContent()+"<style>";var c=[];for(d in this.data.lst)c.push(this.data.lst[d]);c.sort(function(f,e){return f.timestamp>e.timestamp?-1:f.timestamp<e.timestamp?1:0});
if(c.length){var d=document.createElement("span");var g=document.createElement("table");g.className=this.tableClassList;g.appendChild(a(this.getHeaders(),"th"));for(var k=0;k<c.length;k++)g.appendChild(a(this.getColumns(c[k])));d.appendChild(g);b.appendChild(d)}}};nettools.awsSesGuiNotifications.prototype.execute=function(a){var b=this;return a.then(function(c){for(var d=0;d<c.messages.length;d++)null==b.data.lst[c.messages[d].MessageId]&&(b.data.lst[c.messages[d].MessageId]=c.messages[d].Body);b.updateGUI()})};
nettools.awsSesGuiNotifications.prototype.update=function(a,b){b=void 0===b?5:b;var c=this,d=function(){c.execute(a()).then(function(){c.data.count<b-1&&(c.data.count++,window.setTimeout(d,1E3))})["catch"](nettools.jscore.RequestHelper.promiseErrorHandler)};this.initialize();d()};nettools.awsSesGuiNotifications.i18n={timestamp:"Time",recipient:"Recipient",subject:"Subject"};nettools.awsSesGuiNotifications.i18n.delivery={smtpResponse:"Response of SMTP"};
nettools.awsSesGuiNotifications.i18n.bounce={action:"R(action)",reason:"R(reason)",diagnosticCode:"R(diag. code)",status:"R(status)"};